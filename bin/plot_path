#!/bin/sh

if [ -z $1 ]; then
	echo "USAGE: $0 <num of variables>"
	exit
fi

echo "set terminal postscript eps enhanced color" >| tmp.gnuplot
echo "set output \"out.eps\"" >> tmp.gnuplot
echo "unset key" >> tmp.gnuplot

echo "set title \"Trace Plot of coefficients fit by Lasso, Elastic net\"" >> tmp.gnuplot
echo "set xlabel \"lambda\"" >> tmp.gnuplot
echo "set ylabel \"coefficients\"" >> tmp.gnuplot

echo -n "plot $2 $3 0 linetype 0 linewidth 2, " >> tmp.gnuplot

j=1
for i in `seq -f %03g 0 $1`; do
	fn=beta"$i".res

	echo -n "\"$fn\" using 2:3 with lines linecolor $j linetype 1 linewidth 1" >> tmp.gnuplot
	if [ $i -lt $1 ]; then
		echo -n ", " >> tmp.gnuplot
	fi

	j=$((j+1))
done

gnuplot tmp.gnuplot
rm -f tmp.gnuplot

evince out.eps &
